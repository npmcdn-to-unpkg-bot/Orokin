function warjson(a){$.post("WorldState/index",{time:a},function(a){$(".numVersion").remove(),a.Version&&$(".worldState").append($('<span class="label label-default numVersion"/>').text("V"+a.Version).css({bottom:"5px"}));var b=$(".col-Alerts");b.html(""),a.Alerts?($.each(a.Alerts,function(c,d){if(a.timenow<=d.Expiry.sec){var e=$('<div class="alert"/>');d.Activation.sec<=a.timenow?e.append($('<span class="label label-success alert-timer expiry"/>').attr({"data-end":d.Expiry.usec,data:d.Expiry.sec})):e.append($('<span class="label label-default alert-timer activation">').attr({"data-end":d.Activation.usec,data:d.Activation.sec}));var f=$("<div/>").css({"margin-bottom":"3px"});f.append($("<strong/>").text(d.MissionInfo.location+" ")),1==d.MissionInfo.nightmare&&f.append($('<span class="label label-danger alert-cauchemar"/>').text("Cauchemar")),1==d.MissionInfo.archwingRequired&&f.append($('<span class="label label-primary alert-archwing"/>').text("Archwing")),e.append(f),e.append($("<strong/>").text(d.MissionInfo.missionType)),d.MissionInfo.maxWaveNum&&("Espionage"==d.MissionInfo.missionType?e.append($("<spa/>").text(" | Mini. "+d.MissionInfo.maxWaveNum+" données")):"Survie"==d.MissionInfo.missionType?e.append($("<span/>").text(" | "+d.MissionInfo.maxWaveNum+" minutes")):e.append($("<span/>").text(" | "+d.MissionInfo.maxWaveNum+" vagues"))),e.append($("<span/>").text(" | "+d.MissionInfo.faction)),e.append($("<span/>").text(" | "+d.MissionInfo.minEnemyLevel+" - "+d.MissionInfo.maxEnemyLevel)),e.append("<br/>"),e.append($("<span/>").text(d.MissionInfo.missionReward.credits+" crédits")),$.each(d.MissionInfo.missionReward.items,function(a,b){e.append($('<span class="label label-default alert-reward"/>').text(b))}),$.each(d.MissionInfo.missionReward.countedItems,function(a,b){e.append($('<span class="label label-default alert-reward"/>').text(b.ItemCount+" "+b.ItemType))}),b.append(e)}}),$(".alert-timer").each(function(){$(this).countdown($(this).attr("data-end"),function(a){$(this).html(a.strftime(["<span><span>%D</span></span>","<span>J </span>","<span><span>%H</span></span>","<span>h </span>","<span><span>%M</span></span>","<span>m </span>","<span><span>%S</span></span>","<span>s </span>"].join("")))})})):b.append($('<div class="alert"/>').append($("<h3/>").text("Aucune").css({"text-align":"center","margin-top":"10px"})));var c=$(".sortiesInfo"),d=$(".sortiesReward"),e=$(".sortiesMissions");c.html(""),d.html(""),e.html(""),a.Sorties?($.each(a.Sorties,function(a,b){c.append($("<span/>").text(b.Reward).css({"font-weight":"bold"})),c.append($('<div class="sortiesCountdown"/>').attr({"data-end":b.Expiry.usec})),c.append($("<span/>").text("Ennemi : ").append($("<span/>").text(b.Boss).css({"font-weight":"bold"}))),$.each(b.RewardList,function(a,b){d.append($("<span/>").text("- "+b)).append("<br/>")}),$.each(b.Variants,function(a,b){var c=$('<div class="alert"/>');switch(c.append($("<span/>").text(b.node).css({"font-weight":"bold"})),a){case 0:c.append($("<span/>").text(" | 55 - 60"));break;case 1:c.append($("<span/>").text(" | 65 - 80"));break;case 2:c.append($("<span/>").text(" | 80 - 100"))}c.append("<br/>"),c.append($("<span/>").text("Mission : ")),c.append($("<span/>").text(b.missionIndex).css({"font-weight":"bold"})),c.append("<br/>"),c.append($("<span/>").text("Condition : ")),c.append($("<span/>").text(b.modifierIndex).css({"font-weight":"bold"})),e.append(c)})}),$(".sortiesCountdown").each(function(){$(this).countdown($(this).attr("data-end"),function(a){$(this).html(a.strftime(["<span><span>%D</span></span>","<span>J </span>","<span><span>%H</span></span>","<span>h </span>","<span><span>%M</span></span>","<span>m </span>","<span><span>%S</span></span>","<span>s </span>"].join("")))})})):c.append($("<h3/>").text("Aucune").css({"text-align":"center","margin-top":"10px"}));var f=$(".traderName"),g=$(".voidTrader"),h=$(".traderLocation"),i=$(".typeTraderLocation");f.html(""),g.html(""),h.html(""),$.each(a.VoidTraders,function(b,c){if(f.text(c.Character),c.Manifest){var d=$('<table class="table table-bordered table-hover table-striped ItemsTrader"/>'),e=$("<thead><tr><th>Objets</th><th>Ducats</th><th>Crédits</th></tr></thead>"),j=$("<tbody/>");$.each(c.Manifest,function(a,b){j.append($("<tr/>").append($("<td/>").text(b.ItemType).css({"text-align":"center"})).append($("<td/>").text(b.PrimePrice).css({"text-align":"center"})).append($("<td/>").text(b.RegularPrice).css({"text-align":"center"})))}),g.append(d.append(e).append(j))}else g.append($('<div class="alert"/>').append($("<h3/>").text("Marchand Absent").css({"text-align":"center","margin-top":"10px"})));c.Activation.sec<=a.timenow?($(".tradercountdown").attr({"data-end":c.Expiry.usec,data:c.Expiry.sec}),i.text("Actuellement sur :")):($(".tradercountdown").attr({"data-end":c.Activation.usec,data:c.Activation.sec}),i.text("Arrivera sur :")),h.text(c.Node).css({"text-align":"center","margin-top":"10px"})}),$(".tradercountdown").each(function(){$(this).countdown($(this).attr("data-end"),function(a){$(this).html(a.strftime(['<div class="countdown-item">',"<span>Days</span>","<span><span>%D</span></span>","</div>",'<div class="countdown-item">',"<span>Hours</span>","<span><span>%H</span></span>","</div>",'<div class="countdown-item">',"<span>Minutes</span>","<span><span>%M</span></span>","</div>",'<div class="countdown-item">',"<span>Seconds</span>","<span><span>%S</span></span>","</div>"].join("")))})}),setTimeout("warjson(((new Date()).getTimezoneOffset())*-60)",1e4)},"json")}warjson((new Date).getTimezoneOffset()*-60);